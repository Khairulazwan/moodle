var loadingbars,foldervideo,timeSearchVideo,elements,inputIdentifier;require(["jquery"],function(e){"use strict";timeSearchVideo=0;elements=e("#vidrofront-elements");inputIdentifier=e("#id_identifier");e("#vidrofront-title-search").val(inputIdentifier.val()).keyup(findVideo);require(["core/url"],function(e){loadingbars=e.imageUrl("icones/loading-bars","videofront");foldervideo=e.imageUrl("icones/folder-video","videofront")});loadVideos(1,0,true);selectVideo(inputIdentifier.val(),e("#id_name").val())});function loadVideos(a,n,e){if(!e){elements.html('<div style="text-align:center"><img height="80" src="'+loadingbars+'" ></div>');require(["jquery"],function(e){e("html, body").animate({scrollTop:elements.offset().top-100},800)})}require(["core/ajax","jquery"],function(e,i){e.call([{methodname:"mod_videofront_video_list",args:{page:a,pastaid:n,titulo:i("#vidrofront-title-search").val()},done:processListCourse,fail:processListCourseError}])})}function selectVideo(i,a){require(["jquery"],function(e){e("#id_identifier").val(i);if(a.length){e("#id_name").val(a)}e(".list-itens-grid").find(".itens").removeClass("selected");e("#video_identifier_"+i).find(".itens").addClass("selected")})}function processListCourse(l){require(["jquery"],function(i){if(l.status=="success"){var e;if(l.pasta.PASTA_ID==0){e='<li onclick="loadVideos(1, 0, false)">Pasta Raiz</li>'}else{e='<li onclick="loadVideos(1, 0, false)">Pasta Raiz</li>'+'<li onclick="loadVideos(1, '+l.pasta.PASTA_ID+', false)">'+l.pasta.PASTA_TITULO+"</li>"}i("#vidrofront-breadcrumb").html(e);if(l.videos.length){console.log(["VideoFront",l]);elements.html("");var a=i.each(l.videos,function(e,i){var a=l.thumburl.replace(l.thumbreplace,i.VIDEO_IDENTIFIER);var n=i.VIDEO_TITULO;if(!n){n=i.VIDEO_FILENAME}if(i.VIDEO_TIPO=="video"){var s=i.VIDEO_IDENTIFIER.toUpperCase();var t='<div class="list-itens-grid" id="video_identifier_'+s+'" '+"             onclick=\"selectVideo('"+s+"', '"+i.VIDEO_TITULO+"')\" >"+'    <span class="itens" >'+'        <img src="'+a+'" height="133" width="236"><br>'+'        <span class="title">'+n+"</span>"+"    </span>"+"</div>";elements.append(t)}else{var r=i.ITEM_ID.replace("p","");var o='<div class="list-itens-grid">'+'    <span class="itens"  onclick="loadVideos(1, '+r+', false)">'+'        <img src="'+foldervideo+'" height="133" width="236"><br>'+'        <span class="title">'+i.VIDEO_TITULO+"</span>"+"    </span>"+"</div>";elements.append(o)}});i.when(a).done(function(){createPaginator(l.page,l.numvideos,l.perpage,l.pasta.PASTA_ID);var e=inputIdentifier.val().toUpperCase();if(e.length>2){i("#video_identifier_"+e).find(".itens").addClass("selected")}})}else{elements.html('<div class="alert alert-info">Nenhum vídeo localizado</div>');createPaginator(l.page,l.numvideos,l.perpage,l.pasta.PASTA_ID)}}else{processListCourseError(l.error)}})}function processListCourseError(i){console.trace(["VideoFront",response]);require(["jquery"],function(e){elements.html('<div class="alert alert-danger">'+i+"</div>");createPaginator(0,0,0,0)})}function findVideo(){require(["jquery"],function(e){clearInterval(timeSearchVideo);timeSearchVideo=setTimeout(function(){loadVideos(1,0,true)},500)})}function createPaginator(c,p,f,u){require(["jquery"],function(e){var i=Math.floor(p/f);var a=e("#vidrofront-pagination");if(p%f!=0){i+=1}a.html('<span class="pagination-info">Página '+c+" de "+i+"</span>");a.append('<ul class="pagination"></ul>');if(c!=1){var n='<li class="clicked" onclick="loadVideos(1, '+u+', false)"><span>«</span></li>';a.find(".pagination").append(n)}var s=c-4;if(s<1){s=1}if(s!=1){var t="<li><span>...</span></li>";a.find(".pagination").append(t)}var r=0;for(;s<=i;s++){if(s==c){var o='<li class="active"><span>'+s+"</span></li>";a.find(".pagination").append(o)}else{var l='<li class="clicked" onclick="loadVideos('+s+", "+u+', false)"><span>'+s+"</span></li>";a.find(".pagination").append(l)}r++;if(r==7){if(s!=i){a.find(".pagination").append("<li><span>...</span></li>")}break}}if(c!=i&&i>1){var d='<li class="clicked" onclick="loadVideos('+i+", "+u+', false)"><span>»</span></li>';a.find(".pagination").append(d)}})}